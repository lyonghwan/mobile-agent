<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/vaadin-grid/vaadin-grid.html">

<dom-module id="agent-list">
  <template>
    <style is="custom-style">
      :host {
        display: block;
      }

      span {
        @apply(--paper-font-body1);
      }
    </style>
    <vaadin-grid id="grid" selection="{{selected}}">
      <table>
        <colgroup>
          <col>
          <col>
          <col>
          <col>
        </colgroup>
        <thead>
          <tr>
            <th>No.</th>
            <th>Agent</th>
            <th>Status</th>
            <th>IP</th>
          </tr>
        </thead>
        <tbody>
          <template is="dom-repeat" items="[[items]]">
            <tr>
              <td>[[item.seq]]</td>
              <td>[[item.printer]]</td>
              <td>[[item.status]]</td>
              <td>[[item.ip]]</td>
            </tr>
          </template>
        </tbody>
      </table>
    </vaadin-grid>
  </template>

  <script>
    Polymer({
      is: 'agent-list',

      properties: {
        items: {
          type: Array,
          notify: true
        },
        selected: {
          type: Object,
          notify: true,
          readonly: true,
          observe: 'onSelectedChanged'
        }
      },

      ready: function() {
        // select item
        this.$.grid.addEventListener('selected-items-changed', function() {
          this.set('selected', this.items[this.$.grid.selection.selected()]);
        }.bind(this));
      },
      onSelectedChanged: function() {
        console.log(this.selected);
      },
      attached: function() {
        // var grid = grid || this.$.grid;
        // code
        this.items = [{
          printer: 'Agent A',
          status: '10',
          ip: '192.168.35.45'
        }, {
          printer: 'Agent B',
          status: '80',
          ip: '192.168.35.48'
        }, {
          printer: 'Agent B',
          status: '30',
          ip: '192.168.35.48'
        }, {
          printer: 'Agent E',
          status: '40',
          ip: '192.168.35.47'
        }, {
          printer: 'Agent C',
          status: '20',
          ip: '192.168.35.47'
        }];
        this.items.forEach(function(item, index) {
          item.seq = index;
        }.bind(this));
        this.sortItems = this.items || [];
      }
    });
  </script>
</dom-module>
